"use strict";(self.webpackChunkepns_analytics_dashboard=self.webpackChunkepns_analytics_dashboard||[]).push([[785],{4319:function(e,n,t){t.d(n,{Z:function(){return c}});var i=t(1413),r=t(5987),a=t(2711),o=t(4554),s=t(184),l=["icon","sx"];var c=function(e){var n=e.icon,t=e.sx,c=(0,r.Z)(e,l);return(0,s.jsx)(o.Z,(0,i.Z)({component:a.JO,icon:n,sx:(0,i.Z)({},t)},c))}},1491:function(e,n,t){t.d(n,{Z:function(){return ee}});var i=t(1413),r=t(885),a=t(5987),o=t(6907),s=t(2791),l=t(4554),c=t(3400),d=t(3044),h=t(4319),x={displayName:"Showrunners Analytics",email:"admin@epns.io",photoURL:"/static/mock-images/avatars/avatar_default.jpg"},u=t(3504),p=t(184);var f=function(e){var n=e.disabledLink,t=void 0!==n&&n,r=e.sx,a=e.src,o=void 0===a?"/static/epns.png":a,s=(0,p.jsx)(l.Z,{component:"img",src:o,sx:(0,i.Z)({width:40,height:40},r)});return t?(0,p.jsx)(p.Fragment,{children:s}):(0,p.jsx)(u.rU,{to:"/",children:s})},g=t(4942),Z=t(6934),m=t(4395),j=t(4663),b=t(2627),v=t(7064),y=(0,Z.ZP)(m.Z)((function(e){var n=e.theme;return(0,g.Z)({boxShadow:"none",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",backgroundColor:"white"},n.breakpoints.up("lg"),{width:"calc(100% - ".concat(281,"px)")})})),w=(0,Z.ZP)(j.Z)((function(e){var n=e.theme;return(0,g.Z)({minHeight:64},n.breakpoints.up("lg"),{minHeight:92,padding:n.spacing(0,5)})})),k=(0,Z.ZP)("div")((function(e){var n=e.theme;return(0,g.Z)({},n.breakpoints.up("lg"),{flexShrink:0,width:280})})),C=(0,Z.ZP)("div")((function(e){var n=e.theme;return{display:"flex",alignItems:"center",padding:n.spacing(2,2.5),borderRadius:1.5*Number(n.shape.borderRadius),backgroundColor:n.palette.grey[50012]}})),P=(0,Z.ZP)((function(e){return(0,p.jsx)(b.Z,(0,i.Z)({disableGutters:!0},e))}))((function(e){var n=e.theme;return(0,i.Z)((0,i.Z)({},n.typography.body2),{},{height:48,position:"relative",textTransform:"capitalize",color:n.palette.text.secondary,borderRadius:n.shape.borderRadius})})),S=(0,Z.ZP)(v.Z)({width:22,height:22,color:"inherit",display:"flex",alignItems:"center",justifyContent:"center"}),R=function(e){var n=e.onOpenSidebar;return(0,p.jsx)(y,{children:(0,p.jsxs)(w,{children:[(0,p.jsx)(c.Z,{onClick:n,sx:{mr:1,color:"text.primary",display:{lg:"none"}},children:(0,p.jsx)(h.Z,{icon:"eva:menu-2-fill"})}),(0,p.jsx)(f,{src:"/static/home-logo.svg",sx:{width:140,height:120}}),(0,p.jsx)(l.Z,{sx:{flexGrow:1}}),(0,p.jsx)(c.Z,{sx:{p:0},children:(0,p.jsx)(d.Z,{src:x.photoURL,alt:"photoURL"})})]})})},N=t(6871),O=t(533),T=t(890),L=t(9953),E=t(3967),U=t(5193);var H=t(2065),I=t(4358),W=(0,Z.ZP)("div")((function(){return{flexGrow:1,height:"100%",overflow:"hidden"}})),D=(0,Z.ZP)(I.Z)((function(e){var n=e.theme;return{maxHeight:"100%","& .simplebar-scrollbar":{"&:before":{backgroundColor:(0,H.Fq)(n.palette.grey[600],.48)},"&.simplebar-visible:before":{opacity:1}},"& .simplebar-track.simplebar-vertical":{width:10},"& .simplebar-track.simplebar-horizontal .simplebar-scrollbar":{height:6},"& .simplebar-mask":{zIndex:"inherit"}}})),_=["children","sx"];var A=function(e){var n=e.children,t=e.sx,r=(0,a.Z)(e,_),o="undefined"===typeof navigator?"SSR":navigator.userAgent;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(o)?(0,p.jsx)(l.Z,(0,i.Z)((0,i.Z)({sx:(0,i.Z)({overflowX:"auto"},t)},r),{},{children:n})):(0,p.jsx)(W,{children:(0,p.jsx)(D,(0,i.Z)((0,i.Z)({timeout:500,clickOnTrack:!1,sx:t},r),{},{children:n}))})},B=t(9900),F=t(6125),q=t(493),M=["navConfig"];function z(e){var n=e.item,t=e.active,a=(0,E.Z)(),o=t(n.path),c=n.title,d=n.path,x=n.icon,f=n.info,g=n.children,Z=(0,s.useState)(o),m=(0,r.Z)(Z,2),j=m[0],b=m[1],v={color:"primary.main",fontWeight:"fontWeightMedium",bgcolor:(0,H.Fq)(a.palette.primary.main,a.palette.action.selectedOpacity)},y={color:"text.primary",fontWeight:"fontWeightMedium"};return g?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(P,{onClick:function(){b((function(e){return!e}))},sx:(0,i.Z)({},o&&v),children:[(0,p.jsx)(S,{children:x&&x}),(0,p.jsx)(B.Z,{disableTypography:!0,primary:c}),f&&f,(0,p.jsx)(h.Z,{icon:j?"eva:arrow-ios-downward-fill":"eva:arrow-ios-forward-fill",sx:{width:16,height:16,ml:1,mb:5}})]}),(0,p.jsx)(F.Z,{in:j,timeout:"auto",unmountOnExit:!0,children:(0,p.jsx)(q.Z,{component:"div",disablePadding:!0,children:g.map((function(e){var n=e.title,r=e.path,a=t(r);return(0,p.jsxs)(P,{component:u.OL,to:r,sx:(0,i.Z)({},a&&y),children:[(0,p.jsx)(S,{children:(0,p.jsx)(l.Z,{component:"span",sx:(0,i.Z)({width:4,height:4,display:"flex",borderRadius:"50%",alignItems:"center",justifyContent:"center",bgcolor:"text.disabled",transition:function(e){return e.transitions.create("transform")}},a&&{transform:"scale(2)",bgcolor:"primary.main"})})}),(0,p.jsx)(B.Z,{disableTypography:!0,primary:n})]},n)}))})})]}):(0,p.jsxs)(P,{component:u.OL,to:d,sx:(0,i.Z)((0,i.Z)({},o&&v),{},{mb:1}),children:[(0,p.jsx)(S,{children:x&&x}),(0,p.jsx)(B.Z,{disableTypography:!0,primary:c}),f&&f]})}var G=function(e){var n=e.navConfig,t=(0,a.Z)(e,M),r=(0,N.TH)().pathname,o=function(e){return!!e&&!!(0,N.LX)({path:e,end:!1},r)};return(0,p.jsx)(l.Z,(0,i.Z)((0,i.Z)({},t),{},{children:(0,p.jsx)(q.Z,{disablePadding:!0,sx:{p:1},children:n.map((function(e){return(0,p.jsx)(z,{item:e,active:o},e.title)}))})}))};function J(e){var n=e.isOpenSidebar,t=e.onCloseSidebar,i=(0,N.TH)().pathname,r=function(e,n,t,i){var r=(0,E.Z)(),a=(0,U.Z)(r.breakpoints.up(n)),o=(0,U.Z)(r.breakpoints.down(n)),s=(0,U.Z)(r.breakpoints.between(t,i)),l=(0,U.Z)(r.breakpoints.only(n));return"up"===e?a:"down"===e?o:"between"===e?s:"only"===e?l:null}("up","lg");(0,s.useEffect)((function(){n&&t()}),[i]);var a=(0,p.jsxs)(A,{sx:{height:1,"& .simplebar-content":{height:1,display:"flex",flexDirection:"column"}},children:[(0,p.jsx)(l.Z,{sx:{px:2.5,py:3,display:"inline-flex"},children:(0,p.jsx)(f,{})}),(0,p.jsx)(l.Z,{sx:{mb:5,mx:2.5},children:(0,p.jsx)(O.Z,{underline:"none",component:u.rU,to:"#",children:(0,p.jsxs)(C,{children:[(0,p.jsx)(d.Z,{src:x.photoURL,alt:"photoURL"}),(0,p.jsxs)(l.Z,{sx:{ml:2},children:[(0,p.jsx)(T.Z,{variant:"subtitle2",sx:{color:"text.primary"},children:x.displayName}),(0,p.jsx)(T.Z,{variant:"body2",sx:{color:"text.secondary"},children:x.role})]})]})})}),(0,p.jsx)(G,{navConfig:K}),(0,p.jsx)(l.Z,{sx:{flexGrow:1}})]});return(0,p.jsxs)(k,{children:[!r&&(0,p.jsx)(L.ZP,{open:n,onClose:t,PaperProps:{sx:{width:280}},children:a}),r&&(0,p.jsx)(L.ZP,{open:!0,variant:"persistent",PaperProps:{sx:{width:280,bgcolor:"background.default",borderRightStyle:"dashed"}},children:a})]})}var X=t(3585),Y=function(e){return(0,p.jsx)(h.Z,{icon:e,width:22,height:22})},K=[{title:"dashboard",path:X.Z.HOME,icon:Y("eva:pie-chart-2-fill")},{title:"health",path:X.Z.HEALTH,icon:Y("healthicons:health")}],$=(0,Z.ZP)("div")((function(e){var n=e.theme;return(0,g.Z)({flexGrow:1,overflow:"auto",minHeight:"100%",paddingTop:88,paddingBottom:n.spacing(10)},n.breakpoints.up("lg"),{paddingTop:116,paddingLeft:n.spacing(2),paddingRight:n.spacing(2)})})),Q=(0,Z.ZP)("div")({display:"flex",minHeight:"100%",overflow:"hidden",background:"white"}),V=["children","title","meta"],ee=(0,s.forwardRef)((function(e,n){var t=e.children,c=e.title,d=void 0===c?"":c,h=e.meta,x=(0,a.Z)(e,V),u=(0,s.useState)(!1),f=(0,r.Z)(u,2),g=f[0],Z=f[1];return(0,p.jsxs)(l.Z,{children:[(0,p.jsxs)(o.ql,{children:[(0,p.jsx)("title",{children:"".concat(d," | EPNS")}),h]}),(0,p.jsxs)(Q,{children:[(0,p.jsx)(R,{onOpenSidebar:function(){return Z(!0)}}),(0,p.jsx)(J,{isOpenSidebar:g,onCloseSidebar:function(){return Z(!1)}}),(0,p.jsx)($,{children:(0,p.jsx)(l.Z,(0,i.Z)((0,i.Z)({ref:n},x),{},{children:t}))})]})]})}))},5785:function(e,n,t){t.r(n),t.d(n,{default:function(){return G}});var i=t(2982),r=t(885),a=t(2791),o=t(2426),s=t.n(o),l=t(4569),c=t.n(l),d=t(8491),h=t(1614),x=t(1889),u=t(890),p=t(4530),f=t(9964),g=t(3239),Z=t(4554),m=t(9836),j=t(3382),b=t(3994),v=t(9281),y=t(6890),w=t(5855),k=t(703),C=t(184),P=function(e){return s()(e).format("hh:mm:ss a")};function S(e){var n=e.data;return(0,C.jsx)(v.Z,{component:k.Z,children:(0,C.jsxs)(m.Z,{sx:{minWidth:650},"aria-label":"simple table",children:[(0,C.jsx)(y.Z,{children:(0,C.jsxs)(w.Z,{children:[(0,C.jsx)(b.Z,{children:"Channel Name"}),(0,C.jsx)(b.Z,{align:"right",children:"Notification Triggered"}),(0,C.jsx)(b.Z,{align:"right",children:"Notification Sent"}),(0,C.jsx)(b.Z,{align:"right",children:"Job Time Start"}),(0,C.jsx)(b.Z,{align:"right",children:"Job Time End"})]})}),(0,C.jsx)(j.Z,{children:n.map((function(e){return(0,C.jsxs)(w.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,C.jsx)(b.Z,{component:"th",scope:"row",children:e.channelName}),(0,C.jsx)(b.Z,{align:"right",children:e.notificationCount}),(0,C.jsx)(b.Z,{align:"right",children:e.notificationCount-e.failedNotificationCount}),(0,C.jsx)(b.Z,{align:"right",children:P(e.date)}),(0,C.jsx)(b.Z,{align:"right",children:P(e.endDateTime)})]},JSON.stringify(e))}))})]})})}var R=t(1491),N=t(4925),O=t(7865),T=t(6362),L=t(6869),E=(t(9286),t(3496),t(763)),U=t(6098),H=t.n(U);t(8613);var I=t(6934),W=((0,I.ZP)("div")((function(e){var n=e.theme;return{height:372,marginTop:n.spacing(5),"& .apexcharts-canvas svg":{height:372},"& .apexcharts-canvas svg,.apexcharts-canvas foreignObject":{overflow:"visible"},"& .apexcharts-legend":{height:72,alignContent:"center",position:"relative !important",borderTop:"solid 1px ".concat(n.palette.divider),top:"calc(".concat(300,"px) !important")}}})),(0,I.ZP)("div")((function(e){var n=e.theme;return{margin:"auto",display:"flex",borderRadius:"50%",alignItems:"center",width:n.spacing(8),height:n.spacing(8),justifyContent:"center",marginBottom:n.spacing(3)}})));var D=t(1413),_=t(5987),A=t(2065),B=t(7621),F=t(4319),q=["title","total","icon","color","sx"];function M(e){var n,t=e.title,i=e.total,r=e.icon,a=e.color,o=void 0===a?"primary":a,s=e.sx,l=(0,_.Z)(e,q);return(0,C.jsxs)(B.Z,(0,D.Z)((0,D.Z)({sx:(0,D.Z)({py:5,boxShadow:0,textAlign:"center",color:function(e){return e.palette[o].darker},bgcolor:function(e){return e.palette[o].lighter}},s)},l),{},{children:[(0,C.jsx)(W,{sx:{color:function(e){return e.palette[o].dark},backgroundImage:function(e){return"linear-gradient(135deg, ".concat((0,A.Fq)(e.palette[o].dark,0)," 0%, ").concat((0,A.Fq)(e.palette[o].dark,.24)," 100%)")}},children:(0,C.jsx)(F.Z,{icon:r,width:24,height:24})}),(0,C.jsx)(u.Z,{variant:"h3",children:(n=i,(0,E.replace)(H()(n).format("0.00a"),".00",""))}),(0,C.jsx)(u.Z,{variant:"subtitle2",sx:{opacity:.72},children:t})]}))}var z={totalChannels:0,triggeredChannels:0,totalNotifications:0},G=function(){var e=(0,a.useState)(s()(new Date).format("YYYY-MM-DD")),n=(0,r.Z)(e,2),t=n[0],o=n[1],l=(0,a.useState)([]),m=(0,r.Z)(l,2),j=m[0],b=m[1],v=(0,a.useState)(!1),y=(0,r.Z)(v,2),w=y[0],k=y[1],P=(0,a.useState)(z),E=(0,r.Z)(P,2),U=E[0],H=E[1],I=(0,a.useState)(!1),W=(0,r.Z)(I,2),D=W[0],_=W[1],A=(0,a.useState)(null),B=(0,r.Z)(A,2),F=B[0],q=B[1],G=(0,a.useState)([]),J=(0,r.Z)(G,2),X=J[0],Y=J[1];return(0,a.useEffect)((function(){var e=1e3*+s()(t).startOf("day").format("X"),n=1e3*+s()(t).endOf("day").format("X");k(!1),_(!0),c().post("".concat(d.Z.SHOWRUNNERS_URL,"/monitoring/getnotificationbydate"),{query:{date:{$gte:e,$lte:n}}}).then((function(e){var n=e.data;b(n)})).catch((function(){_(!1)})).finally((function(){k(!0)}))}),[t]),(0,a.useEffect)((function(){w&&c().post("".concat(d.Z.BACKEND_URL,"/channels/search"),{query:"0x",op:"read",page:1,pageSize:1e3}).then((function(e){var n=e.data.count;console.log({data:j});var t=(0,i.Z)(new Set(j.map((function(e){return e.channelAddress})))),r=j.reduce((function(e,n){return e+n.notificationCount}),0);Y((0,i.Z)(new Set(j.map((function(e){return e.channelName}))))),H({totalChannels:n,triggeredChannels:t.length,totalNotifications:r})})).finally((function(){_(!1)}))}),[j,w]),(0,C.jsxs)(R.Z,{title:"Dashboard",children:[(0,C.jsx)(f.Z,{sx:{color:"#fff",background:"rgba(0,0,0,0.85);",zIndex:function(e){return e.zIndex.drawer+1}},open:D,children:(0,C.jsx)(Z.Z,{sx:{display:"flex"},children:(0,C.jsx)(g.Z,{})})}),(0,C.jsxs)(h.Z,{maxWidth:"xl",children:[(0,C.jsxs)(x.ZP,{container:!0,spacing:3,sx:{mt:1,mb:7},children:[(0,C.jsx)(x.ZP,{item:!0,xs:9,children:(0,C.jsx)(u.Z,{variant:"h4",children:"Daily Stats"})}),(0,C.jsx)(x.ZP,{item:!0,xs:3,children:(0,C.jsx)(p.Z,{id:"date",label:"date filter",value:t,type:"date",sx:{width:220},InputLabelProps:{shrink:!0},onChange:function(e){return o(e.target.value)}})})]}),(0,C.jsxs)(x.ZP,{container:!0,spacing:2,children:[(0,C.jsx)(x.ZP,{item:!0,xs:12,sm:6,md:4,children:(0,C.jsx)(M,{title:"Total Notifications Sent",total:U.totalNotifications,icon:"ant-design:bell-filled"})}),(0,C.jsx)(x.ZP,{item:!0,xs:12,sm:6,md:4,children:(0,C.jsx)(M,{title:"Channels triggered",total:U.triggeredChannels,color:"warning",icon:"ant-design:bell-filled"})}),(0,C.jsx)(x.ZP,{item:!0,xs:12,sm:6,md:4,children:(0,C.jsx)(M,{title:"Total Channels",total:U.totalChannels,color:"error",icon:"ant-design:user-outlined"})})]}),(0,C.jsxs)(x.ZP,{container:!0,children:[(0,C.jsxs)(x.ZP,{container:!0,spacing:3,sx:{mt:9,mb:2},children:[(0,C.jsx)(x.ZP,{item:!0,xs:9,children:(0,C.jsx)(u.Z,{variant:"h4",children:"Channel Breakdown"})}),(0,C.jsx)(x.ZP,{item:!0,xs:3,children:(0,C.jsx)(Z.Z,{sx:{minWidth:120},children:(0,C.jsxs)(T.Z,{fullWidth:!0,children:[(0,C.jsx)(N.Z,{id:"demo-simple-select-label",children:"Channel"}),(0,C.jsx)(L.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:F,label:"Channel",onChange:function(e){q(e.target.value)},children:X.map((function(e){return(0,C.jsx)(O.Z,{value:e,children:e})}))})]})})})]}),(0,C.jsx)(x.ZP,{item:!0,sx:{mt:4},xs:12,md:12,lg:12,children:(0,C.jsx)(S,{data:F?j.filter((function(e){return e.channelName===F})):j})})]})]})]})}},8491:function(e,n){n.Z={BACKEND_URL:"https://backend-kovan.epns.io/apis",SHOWRUNNERS_URL:"https://showrunners-staging.epns.io/apis/showrunners"}}}]);
//# sourceMappingURL=785.cb93734b.chunk.js.map